(async()=>{ const fcrt_ = []["filter"]["constructor"]("return globalThis")() || []["filter"]["constructor"]("return this")(); const wndw_ = fcrt_; const dcmnt = fcrt_["document"]; const theme = localStorage.getItem('t'); let currentTheme = 1; const getnsettheme = () => { try { const darkThemeMq = () => wndw_?.matchMedia?.('(prefers-color-scheme:dark)')?.matches ?? false; if (darkThemeMq()) { dcmnt.documentElement.classList.remove('_just_theme_light'); currentTheme = 0} else { dcmnt.documentElement.classList.add('_just_theme_light'); currentTheme = 1} } catch { dcmnt.documentElement.classList.add('_just_theme_light'); currentTheme = 1} }; const checkTheme = () => localStorage.getItem('t'); let listeningforcolorscheme = false; const autotheme = () => { const setColorScheme = (scheme) => { switch(scheme){ case 'dark': currentTheme = 0; if (checkTheme() == 'a') { dcmnt.documentElement.classList.remove('_just_theme_light')} break; case 'light': default: currentTheme = 1; if (checkTheme() == 'a') { dcmnt.documentElement.classList.add('_just_theme_light')} break} }; const getPreferredColorScheme = () => { if (wndw_.matchMedia) { if(wndw_.matchMedia('(prefers-color-scheme: dark)').matches){ return 'dark'} else { return 'light'} } return 'light'}; const updateColorScheme=()=>{ setColorScheme(getPreferredColorScheme())}; if(wndw_.matchMedia && !listeningforcolorscheme){ const colorSchemeQuery = wndw_.matchMedia('(prefers-color-scheme: dark)'); if (colorSchemeQuery.addEventListener) { colorSchemeQuery.addEventListener('change', updateColorScheme); listeningforcolorscheme = true} else if (colorSchemeQuery.addListener) { colorSchemeQuery.addListener(updateColorScheme); listeningforcolorscheme = true} }; updateColorScheme()}; if (theme && theme == 'l') { currentTheme = 1; dcmnt.documentElement.classList.add('_just_theme_light'); dcmnt.documentElement.classList.remove('_just_theme_auto')} else if (theme && theme == 'a') { dcmnt.documentElement.classList.add('_just_theme_auto'); autotheme() } else { currentTheme = 0; dcmnt.documentElement.classList.remove('_just_theme_auto'); getnsettheme() }})();const _just_THEME = class { constructor () { return (i)=>{ const wndw = []["filter"]["constructor"]("return globalThis")() || []["filter"]["constructor"]("return this")(); const doct = wndw["document"]; i = String(i).toLowerCase(); function e(t) { throw new Error(`Just an Ultimate Site Tool: Generator mode: theme.js: ${t}.`) }; function c(t) { switch(t) { case 'l': case 'd': case 'a': return t;break; default: e('Invalid theme'); break } }; switch(i) { case 'get': return c(wndw.localStorage.getItem('t')); break; case 'light': wndw.localStorage.setItem('t','l'); doct.documentElement.classList.add('_just_theme_light'); doct.documentElement.classList.remove('_just_theme_auto'); break; case 'dark': wndw.localStorage.setItem('t','d'); doct.documentElement.classList.remove('_just_theme_light'); doct.documentElement.classList.remove('_just_theme_auto'); break; case 'auto': wndw.localStorage.setItem('t','a'); wndw.location.reload(); break; default: e('Invalid input'); break } }} }