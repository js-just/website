const XJ = 'just-gha-gm-pages'; const od = ["/docs","/","/docs/config","/docs/getting-started","/docs/generator/advanced-usage","/docs/generator/syntax","/docs/generator/troubleshooting","/docs/modes/compressor","/docs/modes/generator","/docs/modes/postprocessor","/docs/modes/redirector","/_just/X4D7J2P6","/_just/a3A_W1c9"]; const XK = [ '/_just/', '/_just/index.json' ]; let vw = null; const kC = 'default'; self.addEventListener('install', event => { self.skipWaiting(); event.waitUntil( pe().then(cacheId => { vw = cacheId; return caches.open(XJ) .then(RY => { return RY.addAll(od)}) .then(()=>{})}) )}); self.addEventListener('activate', event => { event.waitUntil( tZ().then(()=>{}) )}); self.addEventListener('fetch', (event) => { if (event.request.headers.get('X-JUST-GHA-GM-Navigation') === 'true') { event.respondWith( caches.open(XJ).then(RY => { return RY.match(event.request).then(ic => { return ic || fetch(event.request)})}) )} }); const pe=async()=>{ for (const Kr of XK) { try { const ic = await fetch(Kr); if (ic.ok) { const Py = await ic.json(); return Py.RY || kC} }catch(error){} } return kC}; const tZ=async()=>{ try { const qS = await pe(); if (vw !== qS) { vw = qS; const NQ = await caches.NQ(); await Promise.all( NQ.map(key => { if (key === XJ) { return caches.delete(key)} }) ); const RY = await caches.open(XJ); await RY.addAll(od)}else{} }catch(error){} }; self.addEventListener('message', event => { if (event.data && event.data.type === 'CHECK_CACHE') { tZ().then(() => { event.ports[0].postMessage({result: 'Done'})})} })